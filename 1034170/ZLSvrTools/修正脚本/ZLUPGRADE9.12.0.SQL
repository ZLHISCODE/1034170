---BEGIN:Զѹܽű
Create Table zlNotices(
			NUMBER(5) NOT NULL,
	ϵͳ		NUMBER(5),		
		VARCHAR2(4000),
		VARCHAR2(250),
	ѱ	VARCHAR2(50),
		NUMBER(5),
	Ѵ	NUMBER(1),
	˳	VARCHAR2(200) DEFAULT '',
		NUMBER(5),
		NUMBER(5),	
	ʼʱ	DATE NOT NULL,
	ֹʱ	DATE)			
	PCTFREE 5
	PCTUSED 90
	STORAGE (INITIAL 512 NEXT 128 PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/

Alter Table zlNotices ADD CONSTRAINT 
	zlNotices_PK PRIMARY KEY ()
	USING INDEX PCTFREE 5
	STORAGE(INITIAL 256 NEXT 128 PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/
Create Table zlNoticeUsr(
		NUMBER(5) NOT NULL,
	Ѷ	NUMBER(1) DEFAULT 0,	--0-;1-ָԱ;2-ָ;3-ָվ
		VARCHAR2(50))			
	PCTFREE 5
	PCTUSED 90
	STORAGE (INITIAL 512 NEXT 128 PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/
Create Table zlNoticeRec(
		NUMBER(5) NOT NULL,	
	û		VARCHAR2(30),
	ʱ	DATE,
		NUMBER(1) DEFAULT 0,	--1ʾҪѵ;0ʾҪѵ
	ѱ־	NUMBER(1) DEFAULT 0,	--1ʾҪ;0ʾ
	ʱ	DATE,
		VARCHAR2(250))			
	PCTFREE 5
	PCTUSED 90
	STORAGE (INITIAL 512 NEXT 128 PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/

Alter Table zlNoticeUsr ADD CONSTRAINT 
	zlNoticeUsr_PK PRIMARY KEY (,Ѷ,)
	USING INDEX PCTFREE 5
	STORAGE(INITIAL 256 NEXT 128 PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/
Alter Table zlNoticeUsr ADD CONSTRAINT 
	zlNoticeUsr_FK_ FOREIGN KEY() 
	REFERENCES zlNotices() ON DELETE CASCADE
/
Alter Table zlNoticeRec ADD CONSTRAINT 
	zlNoticeRec_PK PRIMARY KEY (,û)
	USING INDEX PCTFREE 5
	STORAGE(INITIAL 256 NEXT 128 PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/
Alter Table zlNoticeRec ADD CONSTRAINT 
	zlNoticeRec_FK_ FOREIGN KEY() 
	REFERENCES zlNotices() ON DELETE CASCADE
/
---END:Զѹܽű


Create Table zlUserRoles(
    û varchar2(30),
    ɫ varchar2(30),
     number(1))
    PCTFREE 5
    PCTUSED 90
    STORAGE (INITIAL 256K NEXT 8K PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/

ALTER TABLE zlUserRoles ADD CONSTRAINT 
    zlUserRoles_PK UNIQUE (û,ɫ)
    USING INDEX PCTFREE 10
    STORAGE(INITIAL 32K NEXT 2K PCTINCREASE 0 MAXEXTENTS UNLIMITED)
/

Alter Table zlReports Add ֽ̬ NUMBER(1)
/

Alter Table zlReports ADD CONSTRAINT zlReports_CK_ֽ̬ Check(ֽ̬ IN(0,1))
/

--Զѹܽű:ò˵λ
insert into zlSvrTools(,ϼ,,,˵) values ('0504','05','Զ','H',Null)
/

----------------------------------------------------------------------------
---  INSERT   for   ZLNOTICES
----------------------------------------------------------------------------
CREATE OR REPLACE PROCEDURE ZL_ZLNOTICES_INSERT(
	_IN IN ZLNOTICES.%TYPE,
	ϵͳ_IN IN ZLNOTICES.ϵͳ%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	ѱ_IN IN ZLNOTICES.ѱ%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	Ѵ_IN IN ZLNOTICES.Ѵ%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	ʼʱ_IN IN ZLNOTICES.ʼʱ%TYPE,
	ֹʱ_IN IN ZLNOTICES.ֹʱ%TYPE,
	˳_IN IN ZLNOTICES.˳%TYPE
)
IS
BEGIN
	Insert Into ZLNOTICES
		(,ϵͳ,,,ѱ,,Ѵ,,,ʼʱ,ֹʱ,˳)
		VALUES
		(_IN,ϵͳ_IN,_IN,_IN,ѱ_IN,_IN,Ѵ_IN,_IN,_IN,ʼʱ_IN,ֹʱ_IN,˳_IN);
END ZL_ZLNOTICES_INSERT;
/

----------------------------------------------------------------------------
---  UPDATE   for   ZLNOTICES
----------------------------------------------------------------------------
CREATE OR REPLACE PROCEDURE ZL_ZLNOTICES_UPDATE(
	_IN IN ZLNOTICES.%TYPE,
	ϵͳ_IN IN ZLNOTICES.ϵͳ%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	ѱ_IN IN ZLNOTICES.ѱ%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	Ѵ_IN IN ZLNOTICES.Ѵ%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	_IN IN ZLNOTICES.%TYPE,
	ʼʱ_IN IN ZLNOTICES.ʼʱ%TYPE,
	ֹʱ_IN IN ZLNOTICES.ֹʱ%TYPE,
	˳_IN IN ZLNOTICES.˳%TYPE
)
IS
BEGIN
	Update ZLNOTICES
		Set =_IN,
		    ϵͳ=ϵͳ_IN,
		    =_IN,
		    =_IN,
		    ѱ=ѱ_IN,
		    =_IN,
		    Ѵ=Ѵ_IN,
		    =_IN,
		    =_IN,
		    ʼʱ=ʼʱ_IN,
		    ֹʱ=ֹʱ_IN,
		    ˳=˳_IN
		Where  =_IN;
END ZL_ZLNOTICES_UPDATE;
/

----------------------------------------------------------------------------
---  DELETE   for   ZLNOTICES
----------------------------------------------------------------------------
CREATE OR REPLACE PROCEDURE ZL_ZLNOTICES_DELETE(
	_IN IN ZLNOTICES.%TYPE
)
IS
BEGIN
	Delete From ZLNOTICEUSR Where  =_IN;
	Delete From ZLNOTICES Where  =_IN;
END ZL_ZLNOTICES_DELETE;
/

----------------------------------------------------------------------------
---  INSERT   for   ZLNOTICEUSR
----------------------------------------------------------------------------
CREATE OR REPLACE PROCEDURE ZL_ZLNOTICEUSR_INSERT(
	_IN IN ZLNOTICEUSR.%TYPE,
	Ѷ_IN IN ZLNOTICEUSR.Ѷ%TYPE,
	_IN IN ZLNOTICEUSR.%TYPE
)
IS
BEGIN
	Insert Into ZLNOTICEUSR
		(,Ѷ,)
		VALUES
		(_IN,Ѷ_IN,_IN);
END ZL_ZLNOTICEUSR_INSERT;
/
----------------------------------------------------------------------------
---  DELETE   for   ZLNOTICEUSR
----------------------------------------------------------------------------
CREATE OR REPLACE PROCEDURE ZL_ZLNOTICEUSR_DELETE(
	_IN IN ZLNOTICEUSR.%TYPE
)
IS
BEGIN
	Delete From ZLNOTICEUSR
		Where  =_IN;
END ZL_ZLNOTICEUSR_DELETE;
/
----------------------------------------------------------------------------
---  
----------------------------------------------------------------------------
CREATE OR REPLACE PROCEDURE ZL_ZLNOTICEREC_CHECKNOTICE(
	û_IN	IN	zlNoticeUsr.%type,
	_IN	IN	zlNoticeUsr.%type:='',
	վ_IN	IN	zlNoticeUsr.%type:='',
	_IN	IN	NUMBER:=0)
IS
	Cursor c_Notices IS
		SELECT A.*,B.ʱ FROM zlNotices A,
			(SELECT ,ʱ FROM zlNoticeRec WHERE û=û_IN) B 
		WHERE A.=B.(+)
			AND (( IS NULL AND 1=_IN) OR ( IS NOT NULL AND 0=_IN))
			AND A.ʼʱ<=SYSDATE AND (A.ֹʱ>=SYSDATE OR A.ֹʱ IS NULL)
			AND (A. IN (SELECT  FROM zlNoticeUsr
					WHERE (Ѷ = 1 AND  = û_IN) 
						OR (Ѷ = 2 AND  = _IN) 
						OR (Ѷ = 3 AND  = վ_IN))
			OR A. NOT IN (SELECT  FROM zlNoticeUsr));

	r_Notice c_Notices%RowType;
	
	v_ number(1);
	v_ varchar2(500);
	
	v_ number(1);
	v_CursorID INTEGER;
	v_return INTEGER;
  
	v_Result varchar2(250);
	v_SQL varchar2(4000);

	v_Tmp varchar2(1000);
	v_TmpField varchar2(100);
	v_Pos number(18);
	v_FieldPos number(18);  
	v_FieldType varchar2(50);
	v_Field varchar2(50);
BEGIN
	
	FOR r_Notice In c_Notices Loop
		
		v_:=0;
				
		--ͨϴμʱǷΪǷΪһμ
		if r_Notice.ʱ is null then		
			--һμ,¼
			insert into zlNoticeRec(,û,ʱ,ʱ,) values (r_Notice.,û_IN,SYSDATE,NULL,NULL);
			v_:=1;
		else
			-- 23... μ
			--ǰʱǷϴμʱһ,ˣ¼ʱ
			if r_Notice. is null then
				if _IN=1 then
					update zlNoticeRec set ʱ=SYSDATE	where =r_Notice. and û=û_IN;
					v_:=1;
				end if;
			else
				if SYSDATE>=(r_Notice.ʱ+r_Notice./(24*60)) then
					update zlNoticeRec set ʱ=SYSDATE	where =r_Notice. and û=û_IN;
					v_:=1;
				end if;
			end if;
		end if;	
		
		if v_=1 then
			v_:=0;
			v_:='';

			--		
			if not (r_Notice. is null) then					
				v_:=r_Notice.;

				--strTmpʽ:'[];varchar2|[Ա];date'
				v_Tmp:=r_Notice.˳||'|';
				WHILE not (v_Tmp is null) LOOP

					v_Pos := instr(v_Tmp, '|');								
					v_TmpField:=substr(v_Tmp,1,v_Pos - 1);	
					
					v_FieldPos:=instr(v_TmpField,';');
					v_Field:=substr(v_TmpField,1,v_FieldPos - 1);
					v_FieldType:=trim(Upper(substr(v_TmpField,v_FieldPos+1,100)));

					v_Tmp:=trim(substr(v_Tmp,v_Pos + 1,1000));

					v_Pos:=instr(v_,v_Field);

					if v_Pos>0 then
						
						v_Result:=trim(substr(v_Field,2,1000));
						v_Result:=substr(v_Result,1,LENGTH(v_Result)-1);

						if v_FieldType='NUMBER' then
							v_Result:='to_char('||v_Result||')';
						Elsif v_FieldType='DATE' then
							v_Result:='to_char('||v_Result||',''yyyy-mm-dd'')';
						End if;

						v_:=trim(substr(v_,1,v_Pos - 1)||'''||'||v_Result||'||'''||substr(v_,v_Pos + length(v_Field),1000));

					end if;

				END LOOP;
				v_Pos:=instr(Upper(r_Notice.),' FROM ');
				
				if v_Pos>0 then
					v_SQL:=TRIM('SELECT '''||v_||''''||substr(r_Notice.,v_Pos,4000));

					v_CursorID:=sys.DBMS_SQL.OPEN_CURSOR;
					sys.DBMS_SQL.PARSE(v_CursorID,v_SQL,sys.DBMS_SQL.NATIVE);
					
					dbms_sql.define_column(v_CursorID,1,v_Result,1000);

					v_return :=DBMS_SQL.execute(v_CursorID); 
					
					if DBMS_SQL.FETCH_ROWS(v_CursorID)>0 then
						--µ

						v_:=1;	
						dbms_sql.column_value(v_CursorID,1,v_Result);
						v_:=trim(v_Result);						
					end if;
				end if;
				
			else
				v_:=1;
				v_:=r_Notice.;
			end if;
			
			update zlNoticeRec set =v_,=v_ where =r_Notice. and û=û_IN;
		end if;
	END Loop;

END ZL_ZLNOTICEREC_CHECKNOTICE;
/
----------------------------------------------------------------------------
---  Ѹ
----------------------------------------------------------------------------
CREATE OR REPLACE PROCEDURE ZL_ZLNOTICEREC_NOTICE(
	û_IN	IN	zlNoticerec.û%type,
	_IN	IN	NUMBER:=0)
IS
	Cursor c_Notices IS
		SELECT B.*,A.,A. FROM zlNotices A,
			(SELECT * FROM zlNoticeRec WHERE û=û_IN) B 
		WHERE A.=B.
			AND B.=1 
			AND ((_IN=1 AND  IS NULL) OR ( IS NOT NULL AND _IN=0))
			AND A.ʼʱ<=SYSDATE AND (A.ֹʱ>=SYSDATE OR A.ֹʱ IS NULL);

	r_Notice c_Notices%RowType;
  
	v_ѷ number(1);
  
BEGIN
	
	Update zlNoticeRec Set	ѱ־=0 where û=û_IN;
		
	FOR r_Notice In c_Notices Loop
		
		v_ѷ:=0;

		if r_Notice.ʱ is null then
			
			--һ
			v_ѷ:=1;
		else
			-- 23... 
			if r_Notice. is null then
				if _IN=1 then
					v_ѷ:=1;
				end if;
			else
				--ǰʱǷϴʱһ
				if SYSDATE>=(r_Notice.ʱ+r_Notice./(24*60)) then
					v_ѷ:=1;
				end if;
			end if;
		end if;		
		
		if v_ѷ=1 then
			Update zlNoticeRec Set	ʱ=SYSDATE,
						ѱ־=v_ѷ
			where =r_Notice. 
				and û=û_IN;
		end if;

	END Loop;

END ZL_ZLNOTICEREC_NOTICE;
/

Create Or Replace Function zlSpellCode(v_Instr In Varchar2)
	Return Varchar2 Is
	v_Spell   Varchar2(10);
	v_Input   Varchar2(1000);
	v_Bitchar Varchar2(2);
	v_Bitnum  Integer;
	v_Chrnum  Integer;
	v_Stdstr  Varchar2(50) := 'Ų귢-ŶžȻ-ѹ';
	v_Chara   Varchar2(2000) := '߹HXtHc\ٌrPoaYOcg@@t؁BlEJ֒qO֓';
	v_Charb   Varchar2(2000) := '^RTZڕEٔvCnk[kߙDr^_RdمdEsUtlmؐfKR݅^GSQݙaJMGaPqSsݩذ؄םߛ[]CPGs޵Iۋ@@S{KLxFEz߄Q߅bcHurgYlmpq׃R[րٙSjklnsՕlBMߓhefE\WvuV@mh\G@QRKcDNmnP}LcJK߲GLQbY^';
	v_Charc   Varchar2(2000) := 'nؔP{o֍]Iى[ܳ\xۂdO٭{iSaK׋~p֝PU׀]_KLMLlkon}C{֚܇ފJՀonލܕ\Rmڒ{ٕfYZ׏pWlXddpKةJ\v|AcJ[dPWmgܯtsrX߳ތLMoچuی|ٱOlP~ׇ׉h{c،iۻanIzrRXsءXsUzՑݎAiEJNmqݐjݻcTكwuOQ}zpqweei@yo\]ڝnWpz{ցݏKuqyAߥfJ~xߗZuizHSe';
	v_Chard   Varchar2(2000) := 'pޅއQ_Q]JN^߾a߰܍ܤܖJD\lېOn^lGF^Q}ٜK[hוTځW߶OIZ܄uOQh~LCݶ{EpMصڮۡsBWޞKfdrByۆcJMmyH{SܦgPՙlw}VrMA[CHՉޓhK^KYHkZWLL^`a^`AiLxKG~obtטـܶ|HYXBmHOޚgDqvyIro܀DwyFGz';
	v_Chare   Varchar2(2000) := 'ވݭeM~P~Z[FEiqܗ`Q]{OIج@t׆y|{Ez[XbWsD߃ڍ٦@E';
	v_Charf   Varchar2(2000) := 'eyzNcxYCެxx܏؜Gړ[phJwqEyuM]mpVXkrMMRvaLhSQۺbpKSٺRLPiو]ߑ߻Ka~fWAFܽۮIݳERVODhqD~ݗHvf߼MofؓxݕVَv';
	v_Charg   Varchar2(2000) := '٤mp@BdW^Yؤ}|NvsߦhMlGsغzk޻ھ۬axmwgتܪwkYݑskuPRtبݢfsQp\ؕCh^xxڸgُLMYݞXڬE]dANoTWڴvKPb݄]IA؞kqX}_UߞF|qhkI{܉FWZiح݁P֏u{RJ^';
	v_Charh   Varchar2(2000) := 'xVEAwnJ_\F\Idhu֛n[ކؘ@޶qڭA؀FuiMHH[YaRQLefSg\aC޿UܟFްݓZݦAvbDpfޮZڧ{U\JA\Cjܩ_`cܠi֗gLE{CKtUUo_sIjkn֜fՖՠXbJ؎גۨf}a߀oDIqSXGkۼߧZdSBWڇumUewڶYDxޒDte_VdޥM_MfiTu}wQF@ڻ՟x߫ߘX؛Afo޽Z[';
	v_Charj   Varchar2(2000) := 'آߴܸ|K}uZYيuI^QZaVWiWAؽ٥BLClުen݋ۈUgPWne|}EHHՂJ۔aHTDVCqej؆ۣPOe]aGZ]gybZKpxtY[~dֈCrx{v|Vڙf`Րv{`GITGZYab{\Fvnuܴ֘oBٮ]]qaKR^ڊI_Aڦڵޗ]mdRO^]vT\֔ݣMفBݼXL~iޟeVKnoRޛGyFbNJnڠՇg|L~`]RzvV۞qGAFeڪߚBeXZ؋MLgmN۲hCbڑIkfާ_`QHB~؏j܊xzz}KQRU';
	v_Chark   Varchar2(2000) := 'l_]a|zGab٩ݨ|ݝRR{_Kߒ`DwڐVWfwnc~oULHwxIyߵ@ޢdߠܥڜpF٨ۦdwڲߝEHڿܒܜN\LAkqYkNkظ`Kiۓdq^dKH{ASApHTU';
	v_Charl   Varchar2(2000) := 'hFJ_nB[FnDHlهms`@E׎_|eYOݹHqZLuL~b߷ED[hYmFڳC|PL[GKܨk؂ւr޼߆x\Pvg~ZGٵNߊk߿ٳ\۪ݰWE_t`BbV]ׁ^ZucBۚ֋``Hbncܮ݈ugՏvyG|IْێmޤRޘVhQvOOl[CUC\k`_ښCqsCowh۹Ng`tIvmHyBdsiVۉCwfjwXNL[x_T]Ls֌}VUߣ_zB|RuuuT`ڀjXhjۍAGIcneyLXrF[sxi݆MՓb߉si';
	v_Charm   Varchar2(2000) := 'jiUKݤI۽u~@AMNܬ֙NI؈ܚF^TQ|ݮdY[BqzVeڛmiTY{ޫsXLiQDW_iSJڢk|r@MI]ؿpfxقsFhw}ڤpQևNփքOO{aٰw\Ea[fJ';
	v_Charn   Varchar2(2000) := 'y~vܘycܵޕؾraQyT߭QثDtm[ګHG\C؃rFu٣bWXދRDT݂ۜTإ|BcWfhREmבbD_VHoٯrsxPaekSQGSZہ';
	v_Charo   Varchar2(2000) := 'Mکk֎t{';
	v_Charp   Varchar2(2000) := 'ٽ݇WAۘoQGbQNBkr\Joܡ~AiJmsCاwWtYCBVoۯuRQdܱ|aߨG@X՗G՛ghwQoدvؚlAٷZZZ݃GNwk۶cOHHTٟhEV';
	v_Charq   Varchar2(2000) := 'ހVՃp[tKݽږܙHDnoRޭaWu}GyߌܻMHMڞMܷ@T`eUeՍwtvckBRSaݡܝj@QEXZblcٻ݀ۄۖjIjmbz^N@ډEFASڈyXڽ~VmINo@WzsdV_cuiWXp[Ոm^jڂFGpqGٴޝUgMbFjAڰroL@څD|O۾@ޡz޾dYxޑTCzzڹIbmBejEj|Io';
	v_Charr   Varchar2(2000) := '`Xj׌Nvmrךܐz~gJwJ~FgP݊kqߏn޸}przMܛ݉ިJctټe}U';
	v_Chars   Varchar2(2000) := 'ئlMS|wِLDdrbfܣCQm֠oO~|ߍܑ^Wڨ]۷bi٠WXօlpliY}ۿfdhsڷ_YhߕןՔT}vjJH|WjKًߟ\PAO[XPyzݪYJvZR߱BYmK՜՞}Su|axٿܓgS\ݔ_eHnt_QfTXVBp{tU`ljBfhlpjtFlJ\rDٹ~L|ڡݿbng}`޴ihxp_MqۑTݴmUSrww\ݥ{ZtaiC';
	v_Chart   Varchar2(2000) := 'BD]e`wJFOYncۢUT޷؝۰Մ]UtT؍vZgayۏM|UoG}ZhOSEzNwޏ[cػ߯ؖ߂`LRefXڄpۇ}{Y[n܃PڌLjVpDclq`t٬pxfAq\N@FߋFFPbc١UPn~jB^WWCݱTIhQރܢr؇oPjkns۝ۃ`Zܔرי٢uސ|DrKzڗ';
	v_Charw   Varchar2(2000) := '|ߜcؙܹBߐݸnlj[sٖ~@syނޱghf`WdSTՆclQnt]|^MKEAG~Z׈^dnݘݜYjZ[lfO޳Nݫb}ڏEwG_uNcM~q^Rأ@AF}`HFIF';
	v_Charx   Varchar2(2000) := 'ۭݾTRqOgFOaGHl؉vT@^^@Ev֐Ie@|Llے^hۧSMiVK_]SUBiPyYݠ_TpՒ]ݲvwr۟]N]ettPݍ_yDv`U޺`@^}DRGoEܼ_lmx`K}Aaz}P^XN{yjUqj[MߢCPHאޯxC^kKaߔݷd\ܰgcض܌_S]D]otߩNܺכלTxqPVnMנq՚֞z`Pڼ[rޣ܎՝XMX~zxCXKjY`zGLpo޹S\ޙdbަR';
	v_Chary   Varchar2(2000) := 'ѹfEs\۳ZiڥܾIZ}ٲ۱DVCydofdjkB|zsHeVeٞ܂z`IJׅחVWZ}grU݌^{uRFIBزߺ^سUbuP{|c_orG_׊XyUv]EdwvEvcptbspڱޖOBDzUV{k֖Fׂ@~ޠriC}Tt߮d߽٫ؗ[\NcژWzxko]޲؊lٓsJGghy{O^gܲה~fܧNw۴zy]lYiLy[׍طSgݺAavDsL]܅KWhA۫IeG{ܭVatOIxJٸxk~ݯݵޜ]K[jݒO߈ݬB٧ޔzRT}|ߎخCD~՘kNuݛ~Vi}CٶhZo؅rCNAعhTy`\I[rqOuXMNO܆cdgSxtOߖؒJܫw@x߇MRh܋ڔ_XgSNVSfٚܿy]mqEBqy۩i\لdjry';
	v_Charz   Varchar2(2000) := 'ش٪پڣگںۤۥ۵۸ݧީߡߤߪ߬߸';

Begin
	If v_Instr Is Null Or Length(Ltrim(v_Instr)) = 0 Then
		v_Spell := '';
	Else
		v_Input := Upper(v_Instr);
		v_Spell := '';
		For v_Bitnum In 1 .. Length(v_Input) Loop
			v_Bitchar := Substr(v_Input, v_Bitnum, 1);
			If v_Bitchar >= '' And v_Bitchar <= '' Then
				For v_Chrnum In 1 .. Length(v_Stdstr) Loop
					If Substr(v_Stdstr, v_Chrnum, 1) = '-' Then
						Null;
					Elsif v_Bitchar < Substr(v_Stdstr, v_Chrnum, 1) Then
						v_Spell := v_Spell || Chr(64 + v_Chrnum);
						Exit;
					End If;
				End Loop;
				If v_Bitchar >= '' Then
					v_Spell := v_Spell || 'Z';
				End If;
			Elsif Instr('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.+-*/', v_Bitchar) > 0 Then
				v_Spell := v_Spell || v_Bitchar;
			Elsif Instr('', v_Bitchar) > 0 Then
				v_Spell := v_Spell || Chr(Ascii(v_Bitchar) - 41664);
			Elsif Instr('£ãģţƣǣȣɣʣˣ̣ͣΣϣУѣңӣԣգ֣ףأ٣',v_Bitchar) > 0 Then
				v_Spell := v_Spell || Chr(Ascii(v_Bitchar) - 41856);
			Elsif Instr('', v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'A';
			Elsif Instr('', v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'B';
			Elsif Instr('', v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'G';
			Elsif Instr(v_Chara, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'A';
			Elsif Instr(v_Charb, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'B';
			Elsif Instr(v_Charc, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'C';
			Elsif Instr(v_Chard, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'D';
			Elsif Instr(v_Chare, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'E';
			Elsif Instr(v_Charf, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'F';
			Elsif Instr(v_Charg, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'G';
			Elsif Instr(v_Charh, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'H';
			Elsif Instr(v_Charj, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'J';
			Elsif Instr(v_Chark, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'K';
			Elsif Instr(v_Charl, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'L';
			Elsif Instr(v_Charm, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'M';
			Elsif Instr(v_Charn, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'N';
			Elsif Instr(v_Charo, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'O';
			Elsif Instr(v_Charp, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'P';
			Elsif Instr(v_Charq, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'Q';
			Elsif Instr(v_Charr, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'R';
			Elsif Instr(v_Chars, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'S';
			Elsif Instr(v_Chart, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'T';
			Elsif Instr(v_Charw, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'W';
			Elsif Instr(v_Charx, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'X';
			Elsif Instr(v_Chary, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'Y';
			Elsif Instr(v_Charz, v_Bitchar) > 0 Then
				v_Spell := v_Spell || 'Z';
--			Else
--				v_Spell := v_Spell || '_';
			End If;
			Exit When Length(v_Spell) > 9;
		End Loop;
	End If;
	Return(v_Spell);
End;
/

Create Or Replace Function zlWBCode(v_Instr In Varchar2)
	Return Varchar2 Is
	v_Code    Varchar2(10);
	v_Input   Varchar2(1000);
	v_Bitnum  Integer;
	v_a       Varchar2(1200) := 'ðݩɱͱ޵в˲̲Բܳݲɳݻʴ̵߰ݶٶ𴶭ܶݭ췡ެηƷ˷ܽݳʸ޻ݢùк޶ɺ޿ްݦޮȻĻޥ޽ܸުܴڽݣݼھާܿݨޢݹ޼ݰޤ«ݤâãçéïݮޫġĢĪĳļĹĻĽĺܵإŷŹŸźƥƻƼݽޭܻܷݡǾޡ޾ȧȵ޸ިɢɯɻݪʽ˹ݿ޴ݴݥ̦޷߯ݱܹݸޱέήε޳ݫݾϻݲ޺ܼаЬޯоݷнܺޣѥѦ޹ަѻѿܾ۱Ңҩҽ߮޲۴ӢݺӫӨөӪݯݵݬԷܿպ֥ݧީ';
	v_b       Varchar2(1200) := 'ةܳϵӶ⸽ؽʽ޿¡¤ª½İƸȡȢ϶ѷҮҲԺְ׹۸';
	v_c       Varchar2(1200) := 'ҳʵ˵ۺ軶轾澢پɾԿ¿ìĲƭȰɣɧʥʻ˫̨ۢͨϷѱԦԤԥפ';
	v_d       Varchar2(1200) := 'ưٰձ粼޲򲳧׳ǴڵܷۺϸѸ𳹼Źʹ˹޺ĺ߻ǻꩼپݾ¾㿳Ŀڿſ¢µ۽ǣȮȷɰʢʯˣˬ˶̫̬̩̼ϮѹҳӲԭԸש';
	v_e       Varchar2(1200) := 'ɲʲ⵨ض񷾷ηڷۮꮸθظŹܺѼ콺¾̿òĤؾŧƢǻʤ˦˴̥ϥвңҨҸӯӷ֫֬';
	v_f       Varchar2(1200) := 'Ӱౢò𾲺Ųóóܯءܤصܦ¶Ѷնطܪ챹Թܩ첻弪ν̽ؽǿܥۿܨܮ۹¶ܬùܡܱƺǬǽȥȤȴɥܣʮʿʾ˪̮̳̹ܢΤΥδϲϼТЭܰѩҼܲܧܭԪԫԬܫԶԽֱַ֧־ר';
	v_g       Varchar2(1200) := '訰۰˰߱±Ʊ̱Ͳв貲뷴譴鵽ඹѶج󸦸ؤتبآԼۣꧼ߼誽忪۪õĩثŪاƽئɪɺأѳ۳һյֳۤ׸';
	v_h       Varchar2(1200) := '벷ǲӲݳƴ㶢ح򮻢޾ǿ¬­±²ĿŰƤƵȣ˯˲ͫ͹ϹЩѣգհռսֹ׿';
	v_i       Varchar2(1200) := '멳γسȴ壵ʵεӵ¶Ƿз㸡ٸƸ۹ʹ婺尺Ӻ䰻佻䧻䫻䩼䤼ս䮽нƾھ举©ºûĭĮŢŨŽƯǢǱǳȸȾɬɳʡʪˮ̶̭̲ػ͡ͿΫμϫϪϴСФйкѧѴҫҺӾӿԡԨԴմտ֭ע';
	v_j       Varchar2(1200) := 'Ӱ˳׳ꭵ꽸ƹϺºͻ׻̼ðůɹʦʱ˧ϺϾЪЫҰҷӬӰӳӼخԻ֩';
	v_k       Varchar2(1200) := '߹İ໰ȰɰԱϱ߲𳪳ʳѳ߳ߴ઴߾߶ڵ޶ྲֶྀͶȷͷ߻߼¸ø칾ɹ۹ù˺ƺźǺٺߺ׻ߴ¼ӽ౾ǿ྿пԿߵ޿߷߿ʿ·ŶŻſžơƷǲǺɤɶʷ˱˳˻̤̣̾ΨζιХѫѽߺҧҭҶ߽۫ӴӽӻԱԾ߸զֺֻ֨';
	v_l       Varchar2(1200) := 'հ̹غںػ¼׼ݼνϽīĬǭǵȦ˼ͼΧηθϽѼ԰Բԯնշת';
	v_m       Varchar2(1200) := 'ᱰܱ±ƲƲ᯳״ʹϵص۵ǶĶ뷫ᦷ᥸Ըոḹ᲻˻ϻ᧼ᵼȾܿ¸ñǶȽɽɾ̿ͬͮΡϿӤո֡׬';
	v_n       Varchar2(1200) := 'ͱ㹱ٱԱܱ޲Ѳٳ㰳㲴򵬵ᵼ󶮶㵷㭷ĸҹֹߺ޺ﻳŻ̻лֻ켺ɼ½쾡㽾Ӿ־鿶㡿¾æüؿųƨƩǡʬʭʺˢ˾ΩβξοϧϬϰмиѸչ';
	v_o       Varchar2(1200) := 'αӲ̳㴶ٴִƶܷ۷ʺκͻݽ߿¦¯úŴȲȼɿ˸۰ΪϩϨҵըճ';
	v_p       Varchar2(1200) := 'ٱѱ巳ݳҴ崵ֶ𸤸˸ѹӹٹ峺ֺ׺徻ջżļ忽ƽ󾽾̿տܿ߿»ڢڤįũȹʵ̻ͻдѨҤԢԣԩ۩լխկ֮ڣף';
	v_q       Varchar2(1200) := 'Ӱٱಬвβ˳ۻ˭[ﱴصۡ׶ƶ۶ﰶܶǶﷰ븺ŸƸָӸۨۼ켢ﵽ޽ǽƽȽڽĽ˾ⰾþľ︾Ҿ³èêîíóþťǥǦǮǯǷ۾Ȼɫɱɲɷʨʴ̡߱ͭΣϦϣۭϳۧзпѮسҿӡӭԧԳԹԿաղ׶';
	v_r       Varchar2(1200) := '߰ְǰưɰڰݰ豨ձ𲦲ٲ󳭳ӳγֳ鴤밴ߥݴ򵣵뮵ĵֵ뱶ܶݶ޶ߦ׸޸롹Ϲҹ⺤˻ߧػ߫Ἴ븽ӽ׽ݽܾݾܿ봿ؿٿۿ£§ߣ°ĨĴ߭šţŤŲۯߨƲƴƹǤȪȱɦɨʧʰˤ˩˺̢̧̯̽ͦͱͶЮЯߢжߩѺҡҴҾӵԮժߡشִָֿۥץצק׫ײ׾׽ߪ߬ߤ';
	v_s       Varchar2(1200) := 'ذ輱ıĲ農߳ȳ˳鳴嵵馶鲷鼷ٷŸ˸ϸ¸۹뻱鮼ϼż饼Ƚ駽۲ӿ¿ÿɿݿ¥´ö÷øģľƮưƱǹȨȩȶɭɼ˨̴̪ͩͪͰΦϭУШеҪҬӣդեջֲ֦׮׵';
	v_t       Varchar2(1200) := '᮰°ʰްǱֱ߳䳹Ƴ˳ͳ̳Ѵ޴δ쵾õеѵ뺶빶ƶ췦͸غݸ۬ѹԹ̺ͺܺ˻ɻջżռڼȼ림սֽ̾ؿ¨ëôÿĵƬƪد۶ǧǨǩɸʣʸ˰˽̺ͧ͢Ͳ͸ͺͽر΢ίκϢϤϡϵЦضѡѪѬѭزطعէձ֪׭';
	v_u       Varchar2(1200) := '걱űձֱԱױ곲Ѵ񬴯ôɴ˴δմ񵥵Ƶܵ۵۶˶շعغԼ񤼽ϼ彪ܽɽ꾻ξξþűƣƦƳƿǰǸǼȭȬȯȳ۷˷ڡ̵̱ͯʹͷЧѢѾұӸբվ۵֣֢ױװ׳״׼';
	v_v       Varchar2(1200) := '滰ϳ槴淶ʶ湷Ź棺ûٻ鼧˼߼޼齨毽žʾ˾ѿظ¼ýķūŬŭŮȺɩۿʼˡϱѰѲҦ';
	v_w       Varchar2(1200) := '˰ְ۰ұ±ϲ٭ѳٱŴӴԴߴᷴٵǵʵ͵궱ζ٦ҷ·ַݷٺ٤ĹϺκ򻪻٥ʼѼۼټԽٮĽ־ƾ٩٨ۦٵٳٰ٣ٯżٽƧƫƶٷƾǪٻٴȫټɡɮɵʲʳʹٿٹ̰٬ͣ١͵;٢ΰαλбٲү٫Ӷٸ٧ٶծֵֶ٪ס׷پ';
	v_x       Varchar2(1200) := 'ذȱϱѱͲڳ穴窵޶綷糷ѷ׷츥礸箹ù笺컡ٻûܼͼֽ̼ʽɽԽƾĸŦǿɴ˿ͳάγϸѤӧӱԵԼּֽ֯׺';
	v_y       Varchar2(1200) := 'رƲ߳ϳ䴲ȴʵڮеض̷÷̷Ϸø߸ھڸڬڴѹڭڧ軰ڶڻƼǼɽڦڵ۾ڪ念̿οڲڿڳ®¹áäåĦĥħıĶګŵکǫǴڽڰڹȿڨڷʫʩʶ˥˭˵̸̷ͤͥΪνϯглڼѯѵѶڥҥҹڱӦӥӮӹӺթիگ֤ںؼׯ׻';
Begin
	If v_Instr Is Null Or Length(Ltrim(v_Instr)) = 0 Then
		v_Code := '';
	Else
		v_Input := Upper(v_Instr);
		v_Code  := '';
		For v_Bitnum In 1 .. Length(v_Input) Loop
            if Instr('ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.+-*/', Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || Substr(v_Input, v_Bitnum, 1);
			Elsif Instr(v_a, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'A';
			Elsif Instr(v_b, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'B';
			Elsif Instr(v_c, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'C';
			Elsif Instr(v_d, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'D';
			Elsif Instr(v_e, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'E';
			Elsif Instr(v_f, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'F';
			Elsif Instr(v_g, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'G';
			Elsif Instr(v_h, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'H';
			Elsif Instr(v_i, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'I';
			Elsif Instr(v_j, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'J';
			Elsif Instr(v_k, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'K';
			Elsif Instr(v_l, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'L';
			Elsif Instr(v_m, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'M';
			Elsif Instr(v_n, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'N';
			Elsif Instr(v_o, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'O';
			Elsif Instr(v_p, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'P';
			Elsif Instr(v_q, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'Q';
			Elsif Instr(v_r, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'R';
			Elsif Instr(v_s, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'S';
			Elsif Instr(v_t, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'T';
			Elsif Instr(v_u, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'U';
			Elsif Instr(v_v, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'V';
			Elsif Instr(v_w, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'W';
			Elsif Instr(v_x, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'X';
			Elsif Instr(v_y, Substr(v_Input, v_Bitnum, 1)) > 0 Then
				v_Code := v_Code || 'Y';
			End If;
			Exit When Length(v_Code) > 9;
		End Loop;
	End If;
	Return(v_Code);
End;
/

--ͬ
Create Public Synonym zlNotices for zlNotices
/
Create Public Synonym zlNoticeUsr for zlNoticeUsr
/
Create Public Synonym zlNoticeRec for zlNoticeRec
/
Create Public Synonym ZL_ZLNOTICES_INSERT for ZL_ZLNOTICES_INSERT
/
Create Public Synonym ZL_ZLNOTICES_UPDATE for ZL_ZLNOTICES_UPDATE
/
Create Public Synonym ZL_ZLNOTICES_DELETE for ZL_ZLNOTICES_DELETE
/
Create Public Synonym ZL_ZLNOTICEUSR_INSERT for ZL_ZLNOTICEUSR_INSERT
/
Create Public Synonym ZL_ZLNOTICEUSR_DELETE for ZL_ZLNOTICEUSR_DELETE
/
Create Public Synonym ZL_ZLNOTICEREC_CHECKNOTICE for ZL_ZLNOTICEREC_CHECKNOTICE
/
Create Public Synonym ZL_ZLNOTICEREC_NOTICE for ZL_ZLNOTICEREC_NOTICE
/
--Ȩ
Grant select on zlNotices to PUBLIC
/
Grant select on zlNoticeUsr to PUBLIC
/
Grant select on zlNoticeRec to PUBLIC
/
Grant execute on ZL_ZLNOTICES_INSERT to PUBLIC
/
Grant execute on ZL_ZLNOTICES_UPDATE to PUBLIC
/
Grant execute on ZL_ZLNOTICES_DELETE to PUBLIC
/
Grant execute on ZL_ZLNOTICEUSR_INSERT to PUBLIC
/
Grant execute on ZL_ZLNOTICEUSR_DELETE to PUBLIC
/
Grant execute on ZL_ZLNOTICEREC_CHECKNOTICE to PUBLIC
/
Grant execute on ZL_ZLNOTICEREC_NOTICE to PUBLIC
/

--200516ղ
Grant Execute On zlSpellCode to Public
/
Create Public Synonym zlSpellCode For zlSpellCode
/

Grant Execute On zlWBcode to Public
/
Create Public Synonym zlWBcode For zlWBcode
/